 * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
127.0.0.1 - - [02/Nov/2021 16:24:17] "[33mGET / HTTP/1.1[0m" 404 -
127.0.0.1 - - [02/Nov/2021 16:24:18] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
127.0.0.1 - - [02/Nov/2021 16:39:06] "[32mGET /test HTTP/1.1[0m" 308 -
Exception on /test/ [GET]
Traceback (most recent call last):
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\util\_collections.py", line 1008, in __call__
    return self.registry[key]
KeyError: <greenlet.greenlet object at 0x00000155999723B0 (otid=0x0000015599973740) current active started main>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Python\Python39\lib\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Python\Python39\lib\site-packages\flask\app.py", line 1518, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Python\Python39\lib\site-packages\flask_cors\extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Python\Python39\lib\site-packages\flask\app.py", line 1516, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Python\Python39\lib\site-packages\flask\app.py", line 1502, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\yuwell\PycharmProjects\flask_web\controller\test.py", line 11, in test
    response, data = get_staff_info('root')
  File "C:\Users\yuwell\PycharmProjects\flask_web\service\service_staff.py", line 7, in get_staff_info
    staff_info = db.session.query(Staff).filter(Staff.login_name == staff_login_name)
  File "<string>", line 2, in query
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\orm\scoping.py", line 24, in _proxied
    return self.registry()
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\util\_collections.py", line 1010, in __call__
    return self.registry.setdefault(key, self.createfunc())
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\orm\session.py", line 4172, in __call__
    return self.class_(**local_kw)
  File "C:\Python\Python39\lib\site-packages\flask_sqlalchemy\__init__.py", line 176, in __init__
    bind = options.pop('bind', None) or db.engine
  File "C:\Python\Python39\lib\site-packages\flask_sqlalchemy\__init__.py", line 998, in engine
    return self.get_engine()
  File "C:\Python\Python39\lib\site-packages\flask_sqlalchemy\__init__.py", line 1017, in get_engine
    return connector.get_engine()
  File "C:\Python\Python39\lib\site-packages\flask_sqlalchemy\__init__.py", line 594, in get_engine
    self._engine = rv = self._sa.create_engine(sa_url, options)
  File "C:\Python\Python39\lib\site-packages\flask_sqlalchemy\__init__.py", line 1027, in create_engine
    return sqlalchemy.create_engine(sa_url, **engine_opts)
  File "<string>", line 2, in create_engine
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\util\deprecations.py", line 298, in warned
    return fn(*args, **kwargs)
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\engine\create.py", line 560, in create_engine
    dbapi = dialect_cls.dbapi(**dbapi_args)
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\dialects\mysql\pymysql.py", line 68, in dbapi
    return __import__("pymysql")
ModuleNotFoundError: No module named 'pymysql'
127.0.0.1 - - [02/Nov/2021 16:39:06] "[35m[1mGET /test/ HTTP/1.1[0m" 500 -
127.0.0.1 - - [02/Nov/2021 16:39:12] "[33mGET / HTTP/1.1[0m" 404 -
Exception on /test/ [GET]
Traceback (most recent call last):
  File "C:\Python\Python39\lib\site-packages\pymysql\connections.py", line 613, in connect
    sock = socket.create_connection(
  File "C:\Python\Python39\lib\socket.py", line 844, in create_connection
    raise err
  File "C:\Python\Python39\lib\socket.py", line 832, in create_connection
    sock.connect(sa)
socket.timeout: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\engine\base.py", line 3240, in _wrap_pool_connect
    return fn()
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\pool\base.py", line 310, in connect
    return _ConnectionFairy._checkout(self)
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\pool\base.py", line 868, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\pool\base.py", line 476, in checkout
    rec = pool._do_get()
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\pool\impl.py", line 146, in _do_get
    self._dec_overflow()
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\util\langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\util\compat.py", line 207, in raise_
    raise exception
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\pool\impl.py", line 143, in _do_get
    return self._create_connection()
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\pool\base.py", line 256, in _create_connection
    return _ConnectionRecord(self)
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\pool\base.py", line 371, in __init__
    self.__connect()
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\pool\base.py", line 666, in __connect
    pool.logger.debug("Error on connect(): %s", e)
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\util\langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\util\compat.py", line 207, in raise_
    raise exception
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\pool\base.py", line 661, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\engine\create.py", line 590, in connect
    return dialect.connect(*cargs, **cparams)
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\engine\default.py", line 584, in connect
    return self.dbapi.connect(*cargs, **cparams)
  File "C:\Python\Python39\lib\site-packages\pymysql\connections.py", line 353, in __init__
    self.connect()
  File "C:\Python\Python39\lib\site-packages\pymysql\connections.py", line 664, in connect
    raise exc
pymysql.err.OperationalError: (2003, "Can't connect to MySQL server on 'rm-bp1t1c4tzh885rt1435950.mysql.rds.aliyuncs.com' (timed out)")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Python\Python39\lib\site-packages\flask\app.py", line 2073, in wsgi_app
    response = self.full_dispatch_request()
  File "C:\Python\Python39\lib\site-packages\flask\app.py", line 1518, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "C:\Python\Python39\lib\site-packages\flask_cors\extension.py", line 165, in wrapped_function
    return cors_after_request(app.make_response(f(*args, **kwargs)))
  File "C:\Python\Python39\lib\site-packages\flask\app.py", line 1516, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Python\Python39\lib\site-packages\flask\app.py", line 1502, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**req.view_args)
  File "C:\Users\yuwell\PycharmProjects\flask_web\controller\test.py", line 11, in test
    response, data = get_staff_info('root')
  File "C:\Users\yuwell\PycharmProjects\flask_web\service\service_staff.py", line 8, in get_staff_info
    data = get_data(staff_info, 'one')
  File "C:\Users\yuwell\PycharmProjects\flask_web\utils\common\data_with_dict.py", line 10, in get_data
    query_data = query.first()
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\orm\query.py", line 2762, in first
    return self.limit(1)._iter().first()
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\orm\query.py", line 2846, in _iter
    result = self.session.execute(
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\orm\session.py", line 1688, in execute
    conn = self._connection_for_bind(bind)
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\orm\session.py", line 1529, in _connection_for_bind
    return self._transaction._connection_for_bind(
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\orm\session.py", line 747, in _connection_for_bind
    conn = bind.connect()
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\engine\base.py", line 3194, in connect
    return self._connection_cls(self, close_with_result=close_with_result)
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\engine\base.py", line 96, in __init__
    else engine.raw_connection()
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\engine\base.py", line 3273, in raw_connection
    return self._wrap_pool_connect(self.pool.connect, _connection)
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\engine\base.py", line 3243, in _wrap_pool_connect
    Connection._handle_dbapi_exception_noconnection(
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\engine\base.py", line 2097, in _handle_dbapi_exception_noconnection
    util.raise_(
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\util\compat.py", line 207, in raise_
    raise exception
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\engine\base.py", line 3240, in _wrap_pool_connect
    return fn()
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\pool\base.py", line 310, in connect
    return _ConnectionFairy._checkout(self)
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\pool\base.py", line 868, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\pool\base.py", line 476, in checkout
    rec = pool._do_get()
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\pool\impl.py", line 146, in _do_get
    self._dec_overflow()
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\util\langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\util\compat.py", line 207, in raise_
    raise exception
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\pool\impl.py", line 143, in _do_get
    return self._create_connection()
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\pool\base.py", line 256, in _create_connection
    return _ConnectionRecord(self)
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\pool\base.py", line 371, in __init__
    self.__connect()
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\pool\base.py", line 666, in __connect
    pool.logger.debug("Error on connect(): %s", e)
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\util\langhelpers.py", line 70, in __exit__
    compat.raise_(
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\util\compat.py", line 207, in raise_
    raise exception
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\pool\base.py", line 661, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\engine\create.py", line 590, in connect
    return dialect.connect(*cargs, **cparams)
  File "C:\Python\Python39\lib\site-packages\sqlalchemy\engine\default.py", line 584, in connect
    return self.dbapi.connect(*cargs, **cparams)
  File "C:\Python\Python39\lib\site-packages\pymysql\connections.py", line 353, in __init__
    self.connect()
  File "C:\Python\Python39\lib\site-packages\pymysql\connections.py", line 664, in connect
    raise exc
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'rm-bp1t1c4tzh885rt1435950.mysql.rds.aliyuncs.com' (timed out)")
(Background on this error at: https://sqlalche.me/e/14/e3q8)
127.0.0.1 - - [02/Nov/2021 16:40:05] "[35m[1mGET /test/ HTTP/1.1[0m" 500 -
127.0.0.1 - - [02/Nov/2021 16:40:43] "GET /test/ HTTP/1.1" 200 -
127.0.0.1 - - [02/Nov/2021 16:42:09] "[33mGET //login HTTP/1.1[0m" 404 -
127.0.0.1 - - [02/Nov/2021 16:42:15] "[33mGET /login HTTP/1.1[0m" 404 -
127.0.0.1 - - [02/Nov/2021 16:42:59] "[33mGET /auth HTTP/1.1[0m" 404 -
127.0.0.1 - - [02/Nov/2021 16:43:03] "[31m[1mGET /auth/login HTTP/1.1[0m" 405 -
 * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
127.0.0.1 - - [05/Nov/2021 08:54:50] "[33mGET / HTTP/1.1[0m" 404 -
127.0.0.1 - - [05/Nov/2021 08:54:50] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
127.0.0.1 - - [05/Nov/2021 08:55:09] "[32mGET /test HTTP/1.1[0m" 308 -
127.0.0.1 - - [05/Nov/2021 08:55:09] "GET /test/ HTTP/1.1" 200 -
127.0.0.1 - - [05/Nov/2021 08:58:45] "[33mGET / HTTP/1.1[0m" 404 -
127.0.0.1 - - [05/Nov/2021 08:59:02] "[33mGET / HTTP/1.1[0m" 404 -
127.0.0.1 - - [05/Nov/2021 09:06:14] "[33mGET /login HTTP/1.1[0m" 404 -
127.0.0.1 - - [05/Nov/2021 09:06:39] "[33mGET /auth、login HTTP/1.1[0m" 404 -
127.0.0.1 - - [05/Nov/2021 09:06:46] "[31m[1mGET /auth/login HTTP/1.1[0m" 405 -
127.0.0.1 - - [05/Nov/2021 09:07:18] "[31m[1mGET /auth/login HTTP/1.1[0m" 405 -
 * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
127.0.0.1 - - [05/Nov/2021 09:07:45] "[31m[1mGET /auth/login HTTP/1.1[0m" 401 -
127.0.0.1 - - [05/Nov/2021 09:07:53] "[31m[1mGET /auth/login HTTP/1.1[0m" 401 -
127.0.0.1 - - [05/Nov/2021 09:07:58] "[31m[1mGET /auth/login HTTP/1.1[0m" 401 -
 * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
127.0.0.1 - - [05/Nov/2021 09:11:54] "[33mGET / HTTP/1.1[0m" 404 -
127.0.0.1 - - [05/Nov/2021 09:12:12] "[33mGET / HTTP/1.1[0m" 404 -
127.0.0.1 - - [05/Nov/2021 09:12:15] "[33mGET / HTTP/1.1[0m" 404 -
 * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
127.0.0.1 - - [05/Nov/2021 13:48:40] "GET / HTTP/1.1" 200 -
